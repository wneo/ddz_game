{"version":3,"sources":["assets/scripts/loginscene/loginScene.js"],"names":["cc","Class","Component","properties","wait_node","Node","onLoad","isopen_sound","audioEngine","play","url","raw","myglobal","socket","initSocket","start","onButtonCilck","event","customData","console","log","request_wxLogin","uniqueID","playerData","accountID","nickName","avatarUrl","err","result","JSON","stringify","gobal_count","goldcount","director","loadScene","bind"],"mappings":";;;;;;AAAA;;;;AACAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACTC,SAAS,EAACJ,EAAE,CAACK;EADJ,CAHP;EAOL;EAEAC,MATK,oBASK;IACN;IACA,IAAGC,YAAH,EAAgB;MACZP,EAAE,CAACQ,WAAH,CAAeC,IAAf,CAAoBT,EAAE,CAACU,GAAH,CAAOC,GAAP,CAAW,8BAAX,CAApB,EAA+D,IAA/D;IACF;;IAEDC,oBAAA,CAASC,MAAT,CAAgBC,UAAhB;EACJ,CAhBI;EAkBLC,KAlBK,mBAkBI,CACR,CAnBI;EAqBLC,aArBK,yBAqBSC,KArBT,EAqBeC,UArBf,EAqB0B;IAC3B,QAAOA,UAAP;MACI,KAAK,UAAL;QACIC,OAAO,CAACC,GAAR,CAAY,kBAAZ,EADJ,CAGI;;QAEAR,oBAAA,CAASC,MAAT,CAAgBQ,eAAhB,CAAgC;UAC5BC,QAAQ,EAACV,oBAAA,CAASW,UAAT,CAAoBD,QADD;UAE5BE,SAAS,EAACZ,oBAAA,CAASW,UAAT,CAAoBC,SAFF;UAG5BC,QAAQ,EAACb,oBAAA,CAASW,UAAT,CAAoBE,QAHD;UAI5BC,SAAS,EAACd,oBAAA,CAASW,UAAT,CAAoBG;QAJF,CAAhC,EAKE,UAASC,GAAT,EAAaC,MAAb,EAAoB;UAClB;UACA;UACA;UACA,IAAGD,GAAG,IAAE,CAAR,EAAU;YACPR,OAAO,CAACC,GAAR,CAAY,SAAOO,GAAnB;YACA;UACF;;UAEDR,OAAO,CAACC,GAAR,CAAY,iBAAiBS,IAAI,CAACC,SAAL,CAAeF,MAAf,CAA7B;UACAhB,oBAAA,CAASW,UAAT,CAAoBQ,WAApB,GAAkCH,MAAM,CAACI,SAAzC;UACAhC,EAAE,CAACiC,QAAH,CAAYC,SAAZ,CAAsB,WAAtB;QACH,CAZC,CAYAC,IAZA,CAYK,IAZL,CALF;;QAkBA;;MACJ;QACI;IA1BR;EA4BH,CAlDI,CAmDL;;AAnDK,CAAT","sourceRoot":"/","sourcesContent":["import myglobal from \"../mygolbal.js\"\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n       wait_node:cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        //console.log(\"qian_state.qian:\"+ qian_state.qian)\n        if(isopen_sound){\n            cc.audioEngine.play(cc.url.raw(\"resources/sound/login_bg.ogg\"),true) \n         }\n           \n         myglobal.socket.initSocket()\n    },\n    \n    start () {\n    },\n    \n    onButtonCilck(event,customData){\n        switch(customData){\n            case \"wx_login\":\n                console.log(\"wx_login request\")\n                \n                //this.wait_node.active = true\n                \n                myglobal.socket.request_wxLogin({\n                    uniqueID:myglobal.playerData.uniqueID,\n                    accountID:myglobal.playerData.accountID,\n                    nickName:myglobal.playerData.nickName,\n                    avatarUrl:myglobal.playerData.avatarUrl,\n                },function(err,result){\n                    //请求返回\n                    //先隐藏等待UI\n                    //this.wait_node.active = false\n                    if(err!=0){\n                       console.log(\"err:\"+err)\n                       return     \n                    }\n\n                    console.log(\"login sucess\" + JSON.stringify(result))\n                    myglobal.playerData.gobal_count = result.goldcount\n                    cc.director.loadScene(\"hallScene\")\n                }.bind(this))\n                break\n            default:\n                break\n        }\n    }\n    // update (dt) {},\n\n\n});\n"]}
{"version":3,"sources":["assets/scripts/gameScene/gamebeforeUI.js"],"names":["cc","Class","Component","properties","btn_ready","Node","btn_gamestart","onLoad","active","node","on","console","log","myglobal","playerData","housemanageid","accountID","bind","socket","onChangeHouseManage","data","JSON","stringify","start","onButtonClick","event","customData","requestReady","requestStart","err"],"mappings":";;;;;;AAAA;;;;AAEAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACRC,SAAS,EAACJ,EAAE,CAACK,IADL;IAERC,aAAa,EAACN,EAAE,CAACK;EAFT,CAHP;EAQL;EAEAE,MAVK,oBAUK;IAEN,KAAKD,aAAL,CAAmBE,MAAnB,GAA4B,KAA5B;IACA,KAAKJ,SAAL,CAAeI,MAAf,GAAwB,KAAxB,CAHM,CAKN;;IACA,KAAKC,IAAL,CAAUC,EAAV,CAAa,MAAb,EAAoB,YAAU;MAC1BC,OAAO,CAACC,GAAR,CAAY,oBAAZ;MACAD,OAAO,CAACC,GAAR,CAAY,sCAAoCC,oBAAA,CAASC,UAAT,CAAoBC,aAApE;MACAJ,OAAO,CAACC,GAAR,CAAY,kCAAgCC,oBAAA,CAASC,UAAT,CAAoBE,SAAhE;;MACA,IAAGH,oBAAA,CAASC,UAAT,CAAoBC,aAApB,IAAmCF,oBAAA,CAASC,UAAT,CAAoBE,SAA1D,EAAoE;QAChE;QACA,KAAKV,aAAL,CAAmBE,MAAnB,GAA4B,IAA5B;QACA,KAAKJ,SAAL,CAAeI,MAAf,GAAwB,KAAxB;MACH,CAJD,MAIK;QACD,KAAKF,aAAL,CAAmBE,MAAnB,GAA4B,KAA5B;QACA,KAAKJ,SAAL,CAAeI,MAAf,GAAwB,IAAxB;MACH;IACJ,CAZmB,CAYlBS,IAZkB,CAYb,IAZa,CAApB,EANM,CAoBN;IACA;IACA;IACA;IACA;;IAEAJ,oBAAA,CAASK,MAAT,CAAgBC,mBAAhB,CAAoC,UAASC,IAAT,EAAc;MAC9CT,OAAO,CAACC,GAAR,CAAY,4CAA0CS,IAAI,CAACC,SAAL,CAAeF,IAAf,CAAtD;MACAP,oBAAA,CAASC,UAAT,CAAoBC,aAApB,GAAoCK,IAApC;;MACA,IAAGP,oBAAA,CAASC,UAAT,CAAoBC,aAApB,IAAmCF,oBAAA,CAASC,UAAT,CAAoBE,SAA1D,EAAoE;QAChE;QACA,KAAKV,aAAL,CAAmBE,MAAnB,GAA4B,IAA5B;QACA,KAAKJ,SAAL,CAAeI,MAAf,GAAwB,KAAxB;MACH,CAJD,MAIK;QACD,KAAKF,aAAL,CAAmBE,MAAnB,GAA4B,KAA5B;QACA,KAAKJ,SAAL,CAAeI,MAAf,GAAwB,IAAxB;MACH;IAEJ,CAZmC,CAYlCS,IAZkC,CAY7B,IAZ6B,CAApC;EAaH,CAjDI;EAmDLM,KAnDK,mBAmDI,CAER,CArDI;EAuDL;EAEAC,aAzDK,yBAyDSC,KAzDT,EAyDeC,UAzDf,EAyD0B;IAC3B,QAAOA,UAAP;MACI,KAAK,WAAL;QACIf,OAAO,CAACC,GAAR,CAAY,WAAZ;;QACAC,oBAAA,CAASK,MAAT,CAAgBS,YAAhB;;QACA;;MACJ,KAAK,WAAL;QACI;QACA;QACA;QACChB,OAAO,CAACC,GAAR,CAAY,WAAZ;;QACAC,oBAAA,CAASK,MAAT,CAAgBU,YAAhB,CAA6B,UAASC,GAAT,EAAaT,IAAb,EAAkB;UAC5C,IAAGS,GAAG,IAAE,CAAR,EAAU;YACNlB,OAAO,CAACC,GAAR,CAAY,qBAAmBiB,GAA/B;UACH,CAFD,MAEK;YACDlB,OAAO,CAACC,GAAR,CAAY,sBAAqBS,IAAI,CAACC,SAAL,CAAeF,IAAf,CAAjC;UAEH;QACH,CAPD;;QAQA;;MACL;QACI;IApBR;EAsBH;AAhFI,CAAT","sourceRoot":"/","sourcesContent":["import myglobal from \"../../mygolbal.js\"\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        btn_ready:cc.Node,\n        btn_gamestart:cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n\n        this.btn_gamestart.active = false\n        this.btn_ready.active = false\n\n        //监听本地的发送的消息\n        this.node.on(\"init\",function(){\n            console.log(\"game beforeui init\")\n            console.log(\"myglobal.playerData.housemanageid\"+myglobal.playerData.housemanageid)\n            console.log(\"myglobal.playerData.accountID\"+myglobal.playerData.accountID)\n            if(myglobal.playerData.housemanageid==myglobal.playerData.accountID){\n                //自己就是房主\n                this.btn_gamestart.active = true\n                this.btn_ready.active = false\n            }else{\n                this.btn_gamestart.active = false\n                this.btn_ready.active = true\n            }\n        }.bind(this))\n\n        //监听服务器发送来的消息\n        // myglobal.socket.onGameStart(function(){\n        //     console.log(\"gamebrforeUI onGameStart revice\")\n        //     this.node.active = false\n        // }.bind(this))\n\n        myglobal.socket.onChangeHouseManage(function(data){\n            console.log(\"gamebrforeUI onChangeHouseManage revice\"+JSON.stringify(data))\n            myglobal.playerData.housemanageid = data\n            if(myglobal.playerData.housemanageid==myglobal.playerData.accountID){\n                //自己就是房主\n                this.btn_gamestart.active = true\n                this.btn_ready.active = false\n            }else{\n                this.btn_gamestart.active = false\n                this.btn_ready.active = true\n            }\n\n        }.bind(this))\n    },\n\n    start () {\n\n    },\n\n    // update (dt) {},\n    \n    onButtonClick(event,customData){\n        switch(customData){\n            case \"btn_ready\":\n                console.log(\"btn_ready\")\n                myglobal.socket.requestReady()\n                break\n            case \"btn_start\":\n                // if(isopen_sound){\n                //    cc.audioEngine.play(cc.url.raw(\"resources/sound/start_a.ogg\")) \n                //  }\n                 console.log(\"btn_start\")\n                 myglobal.socket.requestStart(function(err,data){\n                    if(err!=0){\n                        console.log(\"requestStart err\"+err)\n                    }else{\n                        console.log(\"requestStart data\"+ JSON.stringify(data))\n                        \n                    }\n                 })\n                 break    \n            default:\n                break\n        }\n    }\n});\n"]}